var twitter=(function(){"use strict";var ie=Object.defineProperty;var ae=(E,p,w)=>p in E?ie(E,p,{enumerable:!0,configurable:!0,writable:!0,value:w}):E[p]=w;var T=(E,p,w)=>ae(E,typeof p!="symbol"?p+"":p,w);function E(i){return i}function p(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var w={exports:{}},H=w.exports,D;function z(){return D||(D=1,(function(i,e){(function(r,t){t(i)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:H,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const t="The message port closed before a response was received.",g=m=>{const u={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(u).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class y extends WeakMap{constructor(n,o=void 0){super(o),this.createItem=n}get(n){return this.has(n)||this.set(n,this.createItem(n)),super.get(n)}}const R=s=>s&&typeof s=="object"&&typeof s.then=="function",$=(s,n)=>(...o)=>{m.runtime.lastError?s.reject(new Error(m.runtime.lastError.message)):n.singleCallbackArg||o.length<=1&&n.singleCallbackArg!==!1?s.resolve(o[0]):s.resolve(o)},f=s=>s==1?"argument":"arguments",K=(s,n)=>function(l,...A){if(A.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${f(n.minArgs)} for ${s}(), got ${A.length}`);if(A.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${f(n.maxArgs)} for ${s}(), got ${A.length}`);return new Promise((d,x)=>{if(n.fallbackToNoCallback)try{l[s](...A,$({resolve:d,reject:x},n))}catch(a){console.warn(`${s} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),l[s](...A),n.fallbackToNoCallback=!1,n.noCallback=!0,d()}else n.noCallback?(l[s](...A),d()):l[s](...A,$({resolve:d,reject:x},n))})},_=(s,n,o)=>new Proxy(n,{apply(l,A,d){return o.call(A,s,...d)}});let v=Function.call.bind(Object.prototype.hasOwnProperty);const S=(s,n={},o={})=>{let l=Object.create(null),A={has(x,a){return a in s||a in l},get(x,a,h){if(a in l)return l[a];if(!(a in s))return;let c=s[a];if(typeof c=="function")if(typeof n[a]=="function")c=_(s,s[a],n[a]);else if(v(o,a)){let M=K(a,o[a]);c=_(s,s[a],M)}else c=c.bind(s);else if(typeof c=="object"&&c!==null&&(v(n,a)||v(o,a)))c=S(c,n[a],o[a]);else if(v(o,"*"))c=S(c,n[a],o["*"]);else return Object.defineProperty(l,a,{configurable:!0,enumerable:!0,get(){return s[a]},set(M){s[a]=M}}),c;return l[a]=c,c},set(x,a,h,c){return a in l?l[a]=h:s[a]=h,!0},defineProperty(x,a,h){return Reflect.defineProperty(l,a,h)},deleteProperty(x,a){return Reflect.deleteProperty(l,a)}},d=Object.create(s);return new Proxy(d,A)},C=s=>({addListener(n,o,...l){n.addListener(s.get(o),...l)},hasListener(n,o){return n.hasListener(s.get(o))},removeListener(n,o){n.removeListener(s.get(o))}}),se=new y(s=>typeof s!="function"?s:function(o){const l=S(o,{},{getContent:{minArgs:0,maxArgs:0}});s(l)}),W=new y(s=>typeof s!="function"?s:function(o,l,A){let d=!1,x,a=new Promise(N=>{x=function(b){d=!0,N(b)}}),h;try{h=s(o,l,x)}catch(N){h=Promise.reject(N)}const c=h!==!0&&R(h);if(h!==!0&&!c&&!d)return!1;const M=N=>{N.then(b=>{A(b)},b=>{let j;b&&(b instanceof Error||typeof b.message=="string")?j=b.message:j="An unexpected error occurred",A({__mozWebExtensionPolyfillReject__:!0,message:j})}).catch(b=>{console.error("Failed to send onMessage rejected reply",b)})};return M(c?h:a),!0}),te=({reject:s,resolve:n},o)=>{m.runtime.lastError?m.runtime.lastError.message===t?n():s(new Error(m.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?s(new Error(o.message)):n(o)},V=(s,n,o,...l)=>{if(l.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${f(n.minArgs)} for ${s}(), got ${l.length}`);if(l.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${f(n.maxArgs)} for ${s}(), got ${l.length}`);return new Promise((A,d)=>{const x=te.bind(null,{resolve:A,reject:d});l.push(x),o.sendMessage(...l)})},ne={devtools:{network:{onRequestFinished:C(se)}},runtime:{onMessage:C(W),onMessageExternal:C(W),sendMessage:V.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:V.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},U={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return u.privacy={network:{"*":U},services:{"*":U},websites:{"*":U}},S(m,ne,u)};r.exports=g(chrome)}})})(w)),w.exports}var G=z();const k=p(G),Z={matches:["*://twitter.com/*","*://x.com/*"],main(){console.log("Cortex Twitter integration loaded");function i(){document.querySelectorAll('article[data-testid="tweet"]').forEach(t=>{var K,_,v,S;if(t.querySelector(".cortex-save-btn"))return;const g=t.querySelector('[role="group"]');if(!g)return;const m=((K=t.querySelector('[data-testid="tweetText"]'))==null?void 0:K.textContent)||"",u=t.querySelector('[data-testid="User-Name"]'),y=((v=(_=u==null?void 0:u.querySelector("a"))==null?void 0:_.getAttribute("href"))==null?void 0:v.replace("/",""))||"unknown",R=(S=t.querySelector('a[href*="/status/"]'))==null?void 0:S.getAttribute("href"),$=R?`https://twitter.com${R}`:"",f=document.createElement("div");f.className="cortex-save-btn",f.innerHTML=`
          <div style="display: flex; align-items: center; gap: 4px; padding: 0 12px; height: 34px; border-radius: 17px; background: rgba(10, 132, 255, 0.1); border: 1px solid rgba(10, 132, 255, 0.3); cursor: pointer; transition: all 0.2s;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#0A84FF" stroke-width="2">
              <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
            </svg>
            <span style="font-size: 13px; font-weight: 500; color: #0A84FF;">Save</span>
          </div>
        `,f.addEventListener("click",async C=>{C.stopPropagation(),C.preventDefault(),await k.runtime.sendMessage({type:"SAVE_TWEET",data:{text:m,author:y,url:$,timestamp:new Date().toISOString()}}),f.innerHTML=`
            <div style="display: flex; align-items: center; gap: 4px; padding: 0 12px; height: 34px; border-radius: 17px; background: rgba(52, 199, 89, 0.1); border: 1px solid rgba(52, 199, 89, 0.3);">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#34C759" stroke-width="2">
                <path d="M20 6L9 17l-5-5"/>
              </svg>
              <span style="font-size: 13px; font-weight: 500; color: #34C759;">Saved</span>
            </div>
          `,setTimeout(()=>{f.remove()},2e3)}),g.appendChild(f)})}i(),new MutationObserver(()=>{i()}).observe(document.body,{childList:!0,subtree:!0}),k.runtime.onMessage.addListener(r=>{r.type==="SAVE_SUCCESS"&&console.log("Tweet saved successfully:",r.data)})}};function I(i,...e){}const Y={debug:(...i)=>I(console.debug,...i),log:(...i)=>I(console.log,...i),warn:(...i)=>I(console.warn,...i),error:(...i)=>I(console.error,...i)},L=class L extends Event{constructor(e,r){super(L.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=r}};T(L,"EVENT_NAME",B("wxt:locationchange"));let q=L;function B(i){var e;return`${(e=k==null?void 0:k.runtime)==null?void 0:e.id}:twitter:${i}`}function J(i){let e,r;return{run(){e==null&&(r=new URL(location.href),e=i.setInterval(()=>{let t=new URL(location.href);t.href!==r.href&&(window.dispatchEvent(new q(t,r)),r=t)},1e3))}}}const P=class P{constructor(e,r){T(this,"isTopFrame",window.self===window.top);T(this,"abortController");T(this,"locationWatcher",J(this));T(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return k.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,r){const t=setInterval(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearInterval(t)),t}setTimeout(e,r){const t=setTimeout(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearTimeout(t)),t}requestAnimationFrame(e){const r=requestAnimationFrame((...t)=>{this.isValid&&e(...t)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(e,r){const t=requestIdleCallback((...g)=>{this.signal.aborted||e(...g)},r);return this.onInvalidated(()=>cancelIdleCallback(t)),t}addEventListener(e,r,t,g){var m;r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(m=e.addEventListener)==null||m.call(e,r.startsWith("wxt:")?B(r):r,t,{...g,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),Y.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:P.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var m,u,y;const r=((m=e.data)==null?void 0:m.type)===P.SCRIPT_STARTED_MESSAGE_TYPE,t=((u=e.data)==null?void 0:u.contentScriptName)===this.contentScriptName,g=!this.receivedMessageIds.has((y=e.data)==null?void 0:y.messageId);return r&&t&&g}listenForNewerScripts(e){let r=!0;const t=g=>{if(this.verifyScriptStartedEvent(g)){this.receivedMessageIds.add(g.data.messageId);const m=r;if(r=!1,m&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",t),this.onInvalidated(()=>removeEventListener("message",t))}};T(P,"SCRIPT_STARTED_MESSAGE_TYPE",B("wxt:content-script-started"));let O=P;const Q=Symbol("null");let X=0;class ee extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[r,t]of e)this.set(r,t)}}_getPublicKeys(e,r=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const t=this._getPrivateKey(e,r);let g;return t&&this._publicKeys.has(t)?g=this._publicKeys.get(t):r&&(g=[...e],this._publicKeys.set(t,g)),{privateKey:t,publicKey:g}}_getPrivateKey(e,r=!1){const t=[];for(let g of e){g===null&&(g=Q);const m=typeof g=="object"||typeof g=="function"?"_objectHashes":typeof g=="symbol"?"_symbolHashes":!1;if(!m)t.push(g);else if(this[m].has(g))t.push(this[m].get(g));else if(r){const u=`@@mkm-ref-${X++}@@`;this[m].set(g,u),t.push(u)}else return!1}return JSON.stringify(t)}set(e,r){const{publicKey:t}=this._getPublicKeys(e,!0);return super.set(t,r)}get(e){const{publicKey:r}=this._getPublicKeys(e);return super.get(r)}has(e){const{publicKey:r}=this._getPublicKeys(e);return super.has(r)}delete(e){const{publicKey:r,privateKey:t}=this._getPublicKeys(e);return!!(r&&super.delete(r)&&this._publicKeys.delete(t))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new ee;function ge(){}function F(i,...e){}const re={debug:(...i)=>F(console.debug,...i),log:(...i)=>F(console.log,...i),warn:(...i)=>F(console.warn,...i),error:(...i)=>F(console.error,...i)};return(async()=>{try{const{main:i,...e}=Z,r=new O("twitter",e);return await i(r)}catch(i){throw re.error('The content script "twitter" crashed on startup!',i),i}})()})();
twitter;
