name = "cortex-api"
main = "src/index.ts"
compatibility_date = "2025-01-30"
compatibility_flags = ["nodejs_compat"]
workers_dev = false

routes = [
  { pattern = "askcortex.plutas.in/*", zone_name = "plutas.in" }
]

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "cortex-production"
database_id = "9f0902b3-51cf-4cd1-81ca-4cd0c90fed53"

# Vectorize
[[vectorize]]
binding = "VECTORIZE"
index_name = "cortex-embeddings"

# R2 Storage
[[r2_buckets]]
binding = "MEDIA"
bucket_name = "cortex-uploads"

# Environment variables
[vars]
ENVIRONMENT = "production"

# Secrets (set with: wrangler secret put SECRET_NAME)
# - OPENAI_API_KEY
# - JWT_SECRET
# - COMPOSIO_API_KEY
# - GOOGLE_CLIENT_ID (optional, defaults to iOS client ID)
